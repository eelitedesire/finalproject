


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1"/>
<meta content="LCIlFlxOaCYfPDdRGiMAPywgZDMdEwEYnaGn4c_m-Tec_BdGzkTB0jNi" name="csrf-token">
<title>SolarAutopilot</title>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Exo:wght@400;500;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'"/>
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;500;600&display=swap" rel="stylesheet" type="text/css"/>
    </noscript>
    <link phx-track-static rel="stylesheet" href="./css/style.css"/>
    <link rel="stylesheet" href="./css/message.css">
    <link rel="manifest" href="/manifest.json">

    <script defer phx-track-static type="text/javascript" src="/js/app-ed5fb725b2323e6c326d78d689c148ae.js?vsn=d"></script>
    <script defer phx-track-static type="text/javascript" src="/js/vendor/echarts.min-c5ef426b883db4257694b21b88257a57.js?vsn=d"></script>

    <style>

        .container-table{
         left: 30px;
           display: flex;
            justify-content: center;
            align-items: center;

        }

        h1 {
            color: #333;
            text-align: center;
        }

        table {
            
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tbody tr:hover {
            background-color: #e1e1e1;
        }
    </style>
</head>
<body class="with-header">
<div class="header">
    <div class="container">
        <div class="logo"><h1> <span style="color: red;">Solar</span> Autopilot</h1></div>
        <div class="menu">
<a href="/" class="menu-item" data-phx-link="redirect" data-phx-link-state="push">
            <div class="item-img" style="background-image: url(/images/tabs/dashboard-fe6236ddd7c826e9f469babe7dee6705.svg?vsn=d);"></div>
            <span class="item-caption">Dashboard</span>
</a>
            <a href="#charts" data-iframe="/grafana/d/sa-charts?kiosk=tv" class="menu-item">
                <div class="item-img" style="background-image: url(/images/tabs/chart-34fb756a097dde6fe750a40b934affdc.svg?vsn=d);"></div>
                <span class="item-caption">Charts</span>
            </a>
<a href="/analytics" class="menu-item" data-phx-link="redirect" data-phx-link-state="push">
            <div class="item-img" style="background-image: url(/images/tabs/totals-e8345009cbaf91c5842f3bb7500afb79.svg?vsn=d);"></div>
            <span class="item-caption">Analytics</span>
</a>
<a href="/messages" class="menu-item" data-phx-link="redirect" data-phx-link-state="push">
            <div class="item-img" style="background-image: url(/images/tabs/power-60ba709da78825327d4c97c37e46da40.svg?vsn=d);"></div>
            <span class="item-caption">Messages</span>
</a>
<a href="/settings" class="menu-item" data-phx-link="redirect" data-phx-link-state="push">
            <div class="item-img" style="background-image: url(/images/tabs/config-2b0dc6769e27cd4f705e08033cdec960.svg?vsn=d);"></div>
            <span class="item-caption">Settings</span>
</a>
        </div>
    </div>
</div>


    <div class="container-table">
    
    <h1>Analytics Page</h1>
    <br>

    <% if (analyticsData.length > 0) { %>
        <% analyticsData.forEach(analyticsItem => { %>
            <h2><%= analyticsItem.topic %> Analytics</h2>

            <% if (analyticsItem.dailyTotal.length > 0) { %>

               

                    
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Total kWh</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% let totalKWH = 0; %>
                        <% analyticsItem.dailyTotal.forEach(dataPoint => { %>
                            <% if (dataPoint.total_kwh >= 0) { %>
                                <tr>
                                    <td><%= dataPoint.date %></td>
                                    <td><%= dataPoint.total_kwh.toFixed(2) %></td>
                                </tr>
                                <% totalKWH += dataPoint.total_kwh; %>
                            <% } %>
                        <% }); %>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td><%= totalKWH.toFixed(2) %></td>
                        </tr>
                    </tbody>
                </table>
            <% } else { %>
                <p>No analytics data available for <%= analyticsItem.topic %>.</p>
            <% } %>
        <% }); %>
    <% } else { %>
        <p >No analytics data available.</p>
    <% } %>

    <div class="container-table">
</body>
</html>
